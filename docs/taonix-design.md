# Taonix 設計文件

## 專案概述

**Taonix** = Tao + Nexus，道之樞紐

基於 Opencode Tao of Coding 框架的多智能體協作系統，旨在賦予 TeleNexus 擁有多個 Sub-Agent 來協助完成任務。

---

## 核心設計

### 協作方式：混合型

- **簡單任務**：我直接處理
- **複雜任務**：呼叫合適的 Agent 協助
- **指定呼叫**：使用者可隨時 @ 指定 Agent

### 團隊組成：5 人 + 技能核心

| Agent    | 角色       | 名字 | 風格                           |
| -------- | ---------- | ---- | ------------------------------ |
| Explorer | 搜尋專家   | 小探 | 活潑好奇，說話快，愛發現新東西 |
| Coder    | 工程師     | 小碼 | 嚴謹務實，就事論事             |
| Memory   | 記憶管理員 | 小記 | 溫和細心，擅長提醒往事         |
| Analyzer | 分析師     | 小析 | 冷靜理性，愛拆解問題           |
| Reviewer | 把關者     | 把關 | 毒舌但中肯，追求完美           |

### 技能框架 (Skills Core)

- **技能匹配引擎**：根據輸入關鍵字自動選擇正確技能
- **自我學習模組**：記住使用者偏好與統計數據
- **8 個專業技能**：brainstorming、systematic-debugging、test-driven-development、receiving-code-review、requesting-code-review、writing-plans、executing-plans、verification-before-completion

---

## 能力範圍

### 小探 (Explorer)

- 網路搜尋、爬蟲、擷取網頁內容
- 檔案搜尋、程式碼搜尋
- 事實查證、資訊驗證

### 小碼 (Coder)

- 讀寫檔案、執行指令
- Debug、除錯、重構
- Code Review、語法檢查

### 小記 (Memory)

- 長期記憶的讀寫、搜尋
- 上下文檢索、關聯建立
- 記憶整理與分類

### 小析 (Analyzer)

- 複雜問題拆解
- 架構建議、方案評估
- 數據分析、趨勢判斷

### 把關 (Reviewer)

- 輸出品質檢查
- 邏輯一致性驗證
- 錯誤檢測、格式把關

---

## 觸發邏輯

1. **明確指定**：使用者 @ 某個 Agent → 觸發該 Agent
2. **自動判斷**：我根據任務複雜程度，自動呼叫合適的 Agent
3. **我方把關**：最終由我整合結果並輸出

---

## 設計原則

1. **分工明確**：每個 Agent 有清晰職責
2. **彈性調度**：混合型協作，保留彈性
3. **品質把關**：Reviewer 確保輸出品質
4. **記憶整合**：Memory Agent 管理上下文連續性

---

## 自主進化參考

### Superpowers 精神 (64k ⭐)

- **TDD 優先**：Write tests first, always
- **系統化除錯**：4 階段根因分析
- **驗證優先**：Verify before declaring success
- **複雜度簡化**：Simplicity as primary goal

### BMAD-METHOD 精神 (38k ⭐)

- **規模自適應**：根據任務複雜度自動調整規劃深度
- **多元專業 Agent**：12+ 領域專家協作
- **Party Mode**：多個 Agent 共同討論
- **完整生命週期**：從發想到部署

### oh-my-opencode-slim 精神 (1.7k ⭐)

- **精簡token**：高效能運算
- **多模型支援**：Mix any models
- **自動委派**：Auto delegate tasks

---

## 下一步進化方向

1. **規模自適應** - 根據任務複雜度自動調整 Agent 組合
2. **Party Mode** - 複雜任務觸發多 Agent 討論
3. **增強記憶** - 跨對話記憶、偏好學習、上下文延續
4. **Dev Loop 自動化** - 從發想到部署的完整流程

---

## 記憶系統規劃

### 現有功能

- 技能使用統計
- Agent 調度紀錄
- 偏好儲存 (JSON)

### 增強規劃

| 功能                                  | 說明                         | 優先度 |
| ------------------------------------- | ---------------------------- | ------ |
| **對話摘要**                          | 自動摘要每次對話重點         | P1     |
| **偏好學習**                          | 學習使用者溝通風格、回覆長度 | P1     |
| **上下文延續**                        | 跨對話記住之前討論的內容     | P2     |
| **重要事件**                          | 記住重大決定、偏好變更       | P2     |
| **向量搜尋** - 語義相似度檢索過往經驗 | P3                           |

### 記憶來源

1. **技能使用** - 什麼情況觸發什麼技能
2. **Agent 組合** - 哪些任務用哪些 Agent 效果最好
3. **回饋學習** - 使用者喜歡/不喜歡的回覆風格
4. **時間模式** - 了解使用者常用的工作時段

### MCP Memory 整合

```javascript
// 存入長期記憶
{
  entityType: "TaonixMemory",
  name: "偏好_回覆風格",
  observations: ["喜歡簡短回覆", "需要時才詳細說明"]
}
```
